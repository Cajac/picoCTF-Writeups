# Unminify

- [Challenge information](#challenge-information)
- [Manual Solution](#manual-solution)
- [Curl Solution](#curl-solution)
- [References](#references)

## Challenge information
```
Level: Easy
Tags: picoCTF 2024, Web Exploitation, obfuscation, browser_webshell_solvable, minification
Author: JEFFERY JOHN

Description:
I don't like scrolling down to read the code of my website, so I've squished it. 
As a bonus, my pages load faster!

Browse here, and find the flag!

Hints:
1. Try CTRL+U / ⌘+U in your browser to view the page source. 
   You can also add 'view-source:' before the URL, or try curl <URL> in your shell.
2. Minification reduces the size of code, but does not change its functionality.
3. What tools do developers use when working on a website? 
   Many text editors and browsers include formatting.
```
Challenge link: [https://play.picoctf.org/practice/challenge/426](https://play.picoctf.org/practice/challenge/426)

## Manual Solution

Browse to the web site and you will see a web page with the message "Welcome to my flag distribution website!".

On the page, right-click and select 'View page source' (or press `CTRL + U`) to get the HTML-source of the page.  
Since all new lines have been removed the source code is compacted to one line only and is somewhat hard to read.

But we can also view the code via DevTools. Press `F12` or `Ctrl + Shift + I` to activate the developer tools.  
Then select the `Sources` tab and select the `(index)` page in the menu to the left.  
We get the following source code which is much easier to read
```html
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>picoCTF - picoGym | Unminify Challenge</title>
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <style>
            body {
                font-family: "Lucida Console",Monaco,monospace
            }

            h1,p {
                color: #000
            }
        </style>
    </head>
    <body class="picoctf{}" style="margin:0">
        <div class="picoctf{}" style="margin:0;padding:0;background-color:#757575;display:auto;height:40%">
            <a class="picoctf{}" href="/">
                <img src="picoctf-logo-horizontal-white.svg" alt="picoCTF logo" style="display:inline-block;width:160px;height:90px;padding-left:30px">
            </a>
        </div>
        <center>
            <br class="picoctf{}">
            <br class="picoctf{}">
            <div class="picoctf{}" style="padding-top:30px;border-radius:3%;box-shadow:0 5px 10px #0000004d;width:50%;align-self:center">
                <img class="picoctf{}" src="hero.svg" alt="flag art" style="width:150px;height:150px">
                <div class="picoctf{}" style="width:85%">
                    <h2 class="picoctf{}">Welcome to my flag distribution website!</h2>
                    <div class="picoctf{}" style="width:70%">
                        <p class="picoctf{}">If you're reading this, your browser has succesfully received the flag.</p>
                        <p class="picoCTF{<REDACTED>}"></p>
                        <p class="picoctf{}">I just deliver flags, I don't know how to read them...</p>
                    </div>
                </div>
                <br class="picoctf{}">
            </div>
        </center>
    </body>
</html>
```
If this view isn't shown as default, press the `{}`-button to pretty print the code.

On the 9th line from the bottom, we can see the flag
```
      <p class="picoctf{}">If you're reading this, your browser has succesfully received the flag.</p>
      <p class="picoCTF{<REDACTED>}"></p>
      <p class="picoctf{}">I just deliver flags, I don't know how to read them...</p>
```

## Curl Solution

A nicer way to solve this challenge is to use `curl` to retrieve the web page and then search for the flag  
in regular expression format with `grep`
```bash
┌──(kali㉿kali)-[/mnt/…/picoCTF/picoCTF_2024/Forensics/Secret_of_the_Polyglot]
└─$ curl -s http://titan.picoctf.net:59776/ | grep -oE 'picoCTF{[^}]+}'
picoCTF{<REDACTED>}
```

For additional information, please see the references below.

## References

- [curl - Linux manual page](https://man7.org/linux/man-pages/man1/curl.1.html)
- [grep - Linux manual page](https://man7.org/linux/man-pages/man1/grep.1.html)
- [Wikipedia - HTML](https://en.wikipedia.org/wiki/HTML)
- [Wikipedia - Minification (programming)](https://en.wikipedia.org/wiki/Minification_(programming))
